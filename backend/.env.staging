# Staging Environment Configuration
# This file contains configuration for the staging environment
# Copy this to .env.staging and fill in the values

# Node environment
NODE_ENV=staging

# Server Configuration
PORT=8080
API_BASE_URL=https://hr-staging.example.com

# Database Configuration (Staging)
MONGODB_URI=mongodb://localhost:27017
DB_NAME=SM_nomu_staging

# JWT Configuration
JWT_SECRET=your-staging-jwt-secret-here
JWT_EXPIRES_IN=24h
JWT_ISSUER=hr-system-staging
JWT_AUDIENCE=hr-frontend-staging

# Token Management
ENABLE_TOKEN_BLACKLIST=true
ENABLE_REFRESH_TOKENS=true
REFRESH_TOKEN_EXPIRES_IN=7d

# Session Configuration (Legacy - not used with JWT)
SESSION_SECRET=your-staging-session-secret-here

# CORS Configuration
FRONTEND_URL=https://hr-frontend-staging.vercel.app
ALLOWED_ORIGINS=https://hr-frontend-staging.vercel.app,https://hr-staging.example.com

# Security
BCRYPT_ROUNDS=10
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_TEMP_DIR=/tmp/hr-uploads-staging
ENABLE_VIRUS_SCAN=false

# Feature Flags (Staging - Test new features)
FEATURE_PREVIEW_UPLOAD=true
FEATURE_PREVIEW_UPLOAD_GROUPS=Admin,Supervisor
FEATURE_PREVIEW_UPLOAD_PERCENTAGE=100

FEATURE_LEGACY_UPLOAD=false
FEATURE_LEGACY_UPLOAD_GROUPS=
FEATURE_LEGACY_UPLOAD_PERCENTAGE=0

FEATURE_BULK_OPERATIONS=true
FEATURE_BULK_OPERATIONS_GROUPS=Admin
FEATURE_BULK_OPERATIONS_PERCENTAGE=100

# Monitoring and Logging
LOG_LEVEL=debug
ENABLE_ERROR_REPORTING=true
ERROR_REPORTING_SERVICE=sentry
SENTRY_DSN=your-staging-sentry-dsn-here

# Performance
ENABLE_CACHE=true
CACHE_TTL=3600
ENABLE_COMPRESSION=true

# Email Configuration (for notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-staging-email@gmail.com
SMTP_PASS=your-app-specific-password
EMAIL_FROM=HR System Staging <noreply@hr-staging.example.com>

# External Services
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/STAGING/WEBHOOK
ENABLE_SLACK_NOTIFICATIONS=true

# Backup Configuration
ENABLE_AUTO_BACKUP=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=hr-staging-backups

# Deployment Info
DEPLOYED_AT=
BUILD_ID=
GIT_COMMIT=
DEPLOYMENT_ENV=staging

# Health Check
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Feature Flag Rollback Configuration
ROLLBACK_ERROR_THRESHOLD=0.1
ROLLBACK_SAMPLE_SIZE=50
ROLLBACK_COOLDOWN_PERIOD=300000
ENABLE_AUTO_ROLLBACK=true

# Debug Mode (for staging)
DEBUG_MODE=true
VERBOSE_LOGGING=true
SHOW_STACK_TRACES=true